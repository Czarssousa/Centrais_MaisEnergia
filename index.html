<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Atualização Automática</title>
  </head>
  <style>
    #dados,
    #geribamog,
    #geribavap,
    #bluetree,
    #sgai,
    #sgaii,
    #sgaiii,
    #lapi,
    #lapii,
    #divii {
      color: gray;
    
      font-size: 14px;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      text-align: left;   

    }

    #titulo {
      height: 80%;
      color: gray;
      font-size: 16px;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      width: 100%;
      height: 50px;
    }

    .central {
      display: flex;
      flex-direction: column;
      align-items: center;
      border: solid 1px gray;
      width: 200px;
      height: 150px;
      border-radius: 18px;
      border-color: gray;
    }

    .central h1 {
      text-align: center;
    }

    .container {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
  </style>
  <body>
    <div class="container">
      <div class="central">
        <h1 id="titulo">
          Geriba Energy Arc
          <hr />
        </h1>

        <div id="dados">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          Geriba Energy Mog
          <hr />
        </h1>
        <div id="geribamog">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          Geriba Energy Vap Fpap
          <hr />
        </h1>
        <div id="geribavap">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          BlueTree
          <hr />
        </h1>
        <div id="bluetree">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          SGA I
          <hr />
        </h1>
        <div id="sgai">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          SGA II
          <hr />
        </h1>
        <div id="sgaii">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          SGA III
          <hr />
        </h1>
        <div id="sgaiii">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          LAP I
          <hr />
        </h1>
        <div id="lapi">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          LAP II
          <hr />
        </h1>
        <div id="lapii">Carregando dados...</div>
      </div>

      <div class="central">
        <h1 id="titulo">
          DIV II
          <hr />
        </h1>
        <div id="divii">Carregando dados...</div>
      </div>
    </div>

    <script>
      async function buscarDadosArc() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/receber-dados",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de Arc");
          }

          const dados = await response.json();

          document.getElementById("dados").innerHTML = `
          <p>Pressão: ${dados.pressao || "N/A"} bar</p>
          <p>Vazão: ${dados.vazao || "N/A"} ton/h</p>
        `;
        } catch (error) {
          document.getElementById(
            "dados"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosMog() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/geribamog",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de Mog");
          }

          const dados = await response.json();

          document.getElementById("geribamog").innerHTML = `
          <p>Pressão: ${dados.pressao || "N/A"} bar</p>
          <p>Vazão: ${dados.vazao || "N/A"} ton/h</p>
        `;
        } catch (error) {
          document.getElementById(
            "geribamog"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosVap() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/geribavap",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de Vap");
          }

          const dados = await response.json();

          document.getElementById("geribavap").innerHTML = `
          <p>Pressão: ${dados.pressao || "N/A"} bar</p>
          <p>Vazão: ${dados.vazao || "N/A"} ton/h</p>
        `;
        } catch (error) {
          document.getElementById(
            "geribavap"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosBlueTree() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/bluetree",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de BlueTree");
          }

          const dados = await response.json();

          document.getElementById("bluetree").innerHTML = `
          <p>Temperatura: ${dados.temperatura || "N/A"} °C</p>
          <p>TR: ${dados.tr || "N/A"}</p>
        `;
        } catch (error) {
          document.getElementById(
            "bluetree"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosSgai() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/sgai",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de SGA I");
          }

          const dados = await response.json();

          document.getElementById("sgai").innerHTML = `
          <p>Geração: ${dados.geracao || "N/A"} kW</p>
          <p>Irradiação: ${dados.irradiacao || "N/A"} kW/m²</p>
        `;
        } catch (error) {
          document.getElementById(
            "sgai"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosSgaii() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/sgaii",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de SGA II");
          }

          const dados = await response.json();

          document.getElementById("sgaii").innerHTML = `
          <p>Geração: ${dados.geracao || "N/A"} kW</p>
          <p>Irradiação: ${dados.irradiacao || "N/A"} kW/m²</p>
        `;
        } catch (error) {
          document.getElementById(
            "sgaii"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosSgaiii() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/sgaiii",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de SGA III");
          }

          const dados = await response.json();

          document.getElementById("sgaiii").innerHTML = `
          <p>Geração: ${dados.geracao || "N/A"} kW</p>
          <p>Irradiação: ${dados.irradiacao || "N/A"} kW/m²</p>
        `;
        } catch (error) {
          document.getElementById(
            "sgaiii"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosLapi() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/lapi",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de Lapi");
          }

          const dados = await response.json();

          document.getElementById("lapi").innerHTML = `
       <p>Geração: ${dados.geracao || "N/A"} kW</p>
          <p>Irradiação: ${dados.irradiacao || "N/A"} kW/m²</p>
        `;
        } catch (error) {
          document.getElementById(
            "lapi"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosLapii() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/lapii",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de LapII");
          }

          const dados = await response.json();

          document.getElementById("lapii").innerHTML = `
       <p>Geração: ${dados.geracao || "N/A"} kW</p>
          <p>Irradiação: ${dados.irradiacao || "N/A"} kW/m²</p>
        `;
        } catch (error) {
          document.getElementById(
            "lapii"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      async function buscarDadosdivii() {
        try {
          const response = await fetch(
            "https://centrais-mais-energia.vercel.app/api/divii",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
            }
          );

          if (!response.ok) {
            throw new Error("Erro ao buscar os dados de DIVII");
          }

          const dados = await response.json();

          document.getElementById("divii").innerHTML = `
       <p>Geração: ${dados.geracao || "N/A"} kW</p>
          <p>Irradiação: ${dados.irradiacao || "N/A"} kW/m²</p>
        `;
        } catch (error) {
          document.getElementById(
            "divii"
          ).textContent = `Erro: ${error.message}`;
        }
      }

      // Atualiza os dados a cada 5 segundos
      setInterval(() => {
        buscarDadosArc();
        buscarDadosMog();
        buscarDadosVap();
        buscarDadosBlueTree();
        buscarDadosSgai();
        buscarDadosSgaii();
        buscarDadosSgaiii();
        buscarDadosLapi();
        buscarDadosLapii();
        buscarDadosdivii();
      }, 5000);

      // Chama as funções ao carregar a página
      document.addEventListener("DOMContentLoaded", () => {
        buscarDadosArc();
        buscarDadosMog();
        buscarDadosVap();
        buscarDadosBlueTree();
        buscarDadosSgai();
        buscarDadosSgaii();
        buscarDadosSgaiii();
        buscarDadosLapi();
        buscarDadosLapii();
        buscarDadosdivii();
      });
    </script>
  </body>
</html>
